<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"><meta name="robots" content="noindex, nofollow"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Ban chá»‰ Ä‘áº¡o hÃ¨ - Quáº£n lÃ½ danh sÃ¡ch</title><link rel="stylesheet" href="/Sinhhoathe/main.css"><style>body{background:#f7f8fc}.container{max-width:980px}.card{border-radius:14px;box-shadow:0 12px 30px rgba(0,0,0,.06)}.login-box{max-width:420px;margin:60px auto}.table td,.table th{vertical-align:middle}</style><link rel="icon" href="/assets/images/ballbang_favicon.png"></head><body><section class="section"><div class="container"><h1 class="title is-3 has-text-centered" style="margin-bottom:1.5rem">KHU DÃ‚N CÆ¯</h1><div class="notification is-info is-light" style="max-width:800px;margin:0 auto 2rem auto"><strong>ğŸ“Œ Quy trÃ¬nh thá»±c hiá»‡n:</strong><ol style="margin-top:.5rem;margin-left:1.5rem"><li><strong>BÆ°á»›c 1:</strong> ÄÄƒng nháº­p theo ID/máº­t kháº©u do ÄoÃ n phÆ°á»ng cáº¥p.</li><li><strong>BÆ°á»›c 2:</strong> Kiá»ƒm tra danh sÃ¡ch thiáº¿u nhi Ä‘Ã£ Ä‘Äƒng kÃ½ (Bá»• sung thÃªm náº¿u thiáº¿u).</li><li><strong>BÆ°á»›c 3:</strong> Xáº¿p loáº¡i sinh hoáº¡t hÃ¨ cho tá»«ng thiáº¿u nhi (Lá»±a chá»n A, B, C, D).</li><li><strong>BÆ°á»›c 4:</strong> Nháº¥n nÃºt "LÆ°u cáº­p nháº­t" Ä‘á»ƒ hoÃ n táº¥t. Há»‡ thá»‘ng tá»± Ä‘á»™ng gá»­i káº¿t quáº£ xáº¿p loáº¡i vá» ÄoÃ n phÆ°á»ng. Háº¡n cáº­p nháº­t xáº¿p loáº¡i <strong style="color:red">xong trÆ°á»›c ngÃ y 30/9/2026</strong></li></ol></div><div id="loginView" class="card login-box"><div class="card-content"><h2 class="title is-5">ÄÄƒng nháº­p</h2><div class="field"><label class="label">TÃªn Ä‘Äƒng nháº­p</label><div class="control"><input id="loginId" class="input" type="text" placeholder="LiÃªn há»‡ ÄoÃ n phÆ°á»ng LÃ o Cai Ä‘á»ƒ nháº­n ID vÃ  Pass"></div></div><div class="field"><label class="label">Máº­t kháº©u</label><div class="control"><input id="loginPass" class="input" type="password" placeholder="â€¢â€¢â€¢"></div></div><div class="field is-grouped"><div class="control"><button id="btnLogin" class="button is-primary">ÄÄƒng nháº­p</button></div><div class="control"><a href="/Sinhhoathe/dangky.html" class="button is-light">Trang Ä‘Äƒng kÃ½</a></div></div><p id="loginErr" class="help is-danger" style="display:none">Sai thÃ´ng tin Ä‘Äƒng nháº­p.</p></div></div><div id="adminView" style="display:none"><div class="card"><div class="card-content"><div class="level"><div class="level-left"><h2 class="title is-5">Danh sÃ¡ch cá»§a <span id="currentHamlet"></span> <span id="countBadge" class="tag is-info is-light" style="margin-left:8px">0/0</span></h2></div><div class="level-right"><button id="btnLogout" class="button is-light">ÄÄƒng xuáº¥t</button></div></div><div class="box"><h3 class="title is-6">ThÃªm nhanh ngÆ°á»i Ä‘Äƒng kÃ½</h3><div class="columns is-multiline"><div class="column is-4"><input id="qa_fullName" class="input" placeholder="Há»Œ TÃŠN (IN HOA)"></div><div class="column is-2"><input id="qa_birthYear" class="input" inputmode="numeric" placeholder="NÄƒm sinh"></div><div class="column is-3"><div class="select is-fullwidth"><select id="qa_school"><option value="">-- Chá»n trÆ°á»ng --</option></select></div></div><div class="column is-3"><input id="qa_parentName" class="input" placeholder="Há»Œ TÃŠN PH (IN HOA)"></div><div class="column is-3"><input id="qa_parentPhone" class="input" inputmode="numeric" placeholder="SÄT PH"></div><div class="column is-3"><button id="btnQuickAdd" class="button is-primary is-fullwidth">ThÃªm vÃ o danh sÃ¡ch</button></div></div></div><div class="table-container"><table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>#</th><th>Há» vÃ  tÃªn</th><th>NÄƒm sinh</th><th>TrÆ°á»ng</th><th>Äá»‹a chá»‰</th><th>Phá»¥ huynh</th><th>Äiá»‡n thoáº¡i PH</th><th>Xáº¿p loáº¡i</th></tr></thead><tbody id="tblBody"></tbody></table></div><div class="field is-grouped"><div class="control"><button id="btnSave" class="button is-primary">LÆ°u cáº­p nháº­t</button></div><div class="control"><button id="btnReload" class="button is-light">Táº£i láº¡i</button></div></div></div></div></div></div></section><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script><script src="/Sinhhoathe/firebase.config.js"></script><script>let loginView=document.getElementById("loginView"),adminView=document.getElementById("adminView"),loginId=document.getElementById("loginId"),loginPass=document.getElementById("loginPass"),loginErr=document.getElementById("loginErr"),currentHamlet=document.getElementById("currentHamlet"),tblBody=document.getElementById("tblBody"),qa_fullName=document.getElementById("qa_fullName"),qa_birthYear=document.getElementById("qa_birthYear"),qa_school=document.getElementById("qa_school"),qa_parentName=document.getElementById("qa_parentName"),qa_parentPhone=document.getElementById("qa_parentPhone"),countBadge=document.getElementById("countBadge"),SESSION={hamlet:null},PASSWORDS={},META={schools:[],wards:[],hamlets:{}},REG_CACHE=[],hasFirebase=()=>window.firebase&&window.firebase.apps&&window.firebase.apps.length,norm=e=>(e||"").trim().toLowerCase();function subscribePasswords(){var e;hasFirebase()&&((e=firebase.database().ref("Sinhhoathe/Passwords")).off(),e.on("value",e=>{PASSWORDS=e.val()||{}}))}function subscribeMeta(){var e;hasFirebase()&&((e=firebase.database().ref("Sinhhoathe/Meta")).off(),e.on("value",e=>{META=e.val()||{schools:[],wards:[],hamlets:{}},renderSchools()}))}function renderSchools(){qa_school.innerHTML='<option value="">-- Chá»n trÆ°á»ng --</option>',(META.schools||[]).forEach(e=>{var t=document.createElement("option");t.value=e,t.textContent="TrÆ°á»ng "+e,qa_school.appendChild(t)})}function subscribeRegistrations(){var e;hasFirebase()&&((e=firebase.database().ref("Sinhhoathe/Registrations")).off(),e.on("value",e=>{let t=e.val(),a=[];t&&"object"==typeof t&&Object.keys(t).forEach(e=>{a.push({_key:e,...t[e]||{}})}),REG_CACHE=a,renderTable()}))}function resolvePasswordById(e,t){if(t)for(var a in t){var n=t[a];if(n&&"object"==typeof n){if((n.id||"").trim().toLowerCase()===(e||"").trim().toLowerCase())return{key:a,password:n.password||"",wardName:n.wardName||"",hamletName:n.hamletName||a}}else if(e===a)return{key:a,password:n||"",hamletName:a,wardName:""}}return null}function renderTable(){if(SESSION.hamlet){var e=REG_CACHE.filter(e=>norm(e.hamlet)===norm(SESSION.hamlet)&&(!SESSION.ward||norm(e.ward)===norm(SESSION.ward))),t=(tblBody.innerHTML="",e.length);let n=1;t?(e.forEach((e,t)=>{["A","B","C","D",""].includes(e.grade)||(e.grade="");var a=document.createElement("tr");a.innerHTML=`<td>${n++}</td><td>${e.fullName||""}</td><td>${e.birthYear||""}</td><td>${e.school||""}</td><td>
          <strong>${e.hamlet||""}</strong><br><span class="is-size-7 has-text-grey">${e.ward||""}</span>
          </td><td>${e.parentName||""}</td><td>${e.parentPhone||""}</td><td><div class="select is-small"><select data-role="grade"><option value="" ${""===e.grade?"selected":""}>--</option><option value="A" ${"A"===e.grade?"selected":""}>A</option><option value="B" ${"B"===e.grade?"selected":""}>B</option><option value="C" ${"C"===e.grade?"selected":""}>C</option><option value="D" ${"D"===e.grade?"selected":""}>D</option></select></div></td>`,a.dataset.key=e._key||"",tblBody.appendChild(a)}),countBadge.textContent=t+"/"+t):(e=document.createElement("tr"),(t=document.createElement("td")).colSpan=7,t.className="has-text-centered has-text-grey",t.textContent="KhÃ´ng cÃ³ dá»¯ liá»‡u",e.appendChild(t),tblBody.appendChild(e),countBadge.textContent="0/0")}else tblBody.innerHTML="",countBadge.textContent="0/0"}document.getElementById("btnLogin").addEventListener("click",()=>{var e=(loginId.value||"").trim(),t=(loginPass.value||"").trim(),a=resolvePasswordById(e,PASSWORDS);if(e&&a&&a.password&&t===a.password){if(loginErr.style.display="none",SESSION.hamlet=a.hamletName,SESSION.ward=a.wardName||"",!SESSION.ward)for(var n of META.wards||[])if((META.hamlets&&META.hamlets[n]||[]).includes(SESSION.hamlet)){SESSION.ward=n;break}currentHamlet.textContent=SESSION.hamlet+(SESSION.ward?` (${SESSION.ward})`:""),loginView.style.display="none",adminView.style.display="",renderTable()}else loginErr.style.display=""}),document.getElementById("btnLogout").addEventListener("click",()=>{SESSION.hamlet=null,adminView.style.display="none",loginView.style.display="",loginId.value="",loginPass.value=""}),document.getElementById("btnReload").addEventListener("click",renderTable);let toUpper=e=>e&&e.addEventListener("input",()=>e.value=e.value.toUpperCase()),digitsOnly=(toUpper(qa_fullName),toUpper(qa_parentName),e=>e&&e.addEventListener("input",()=>e.value=e.value.replace(/\D+/g,"")));digitsOnly(qa_birthYear),digitsOnly(qa_parentPhone),document.getElementById("btnQuickAdd").addEventListener("click",()=>{var e;return SESSION.hamlet?(e={fullName:(qa_fullName.value||"").trim(),birthYear:(qa_birthYear.value||"").trim(),school:qa_school.value,ward:SESSION.ward||"",hamlet:SESSION.hamlet,parentName:(qa_parentName.value||"").trim(),parentPhone:(qa_parentPhone.value||"").trim(),grade:"",savedAt:Date.now()}).fullName&&/^\d{4}$/.test(e.birthYear)&&e.school?hasFirebase()?void firebase.database().ref("registrations").push(e).then(()=>{qa_fullName.value="",qa_birthYear.value="",qa_school.value="",qa_parentName.value="",qa_parentPhone.value="",alert("ÄÃ£ thÃªm.")}).catch(()=>alert("KhÃ´ng thá»ƒ thÃªm thÃ´ng tin. Vui lÃ²ng thá»­ láº¡i.")):alert("Há»‡ thá»‘ng chÆ°a sáºµn sÃ ng. Vui lÃ²ng thá»­ láº¡i."):alert("Nháº­p Há»Œ TÃŠN (IN HOA), nÄƒm sinh 4 sá»‘ vÃ  chá»n trÆ°á»ng."):alert("ChÆ°a Ä‘Äƒng nháº­p")}),document.getElementById("btnSave").addEventListener("click",()=>{if(SESSION.hamlet){if(!hasFirebase())return alert("Há»‡ thá»‘ng chÆ°a sáºµn sÃ ng. Vui lÃ²ng thá»­ láº¡i.");let a=[];Array.from(tblBody.querySelectorAll("tr")).forEach(e=>{var t=e.dataset.key;t&&(e=(e=e.querySelector('select[data-role="grade"]'))&&e.value||"",a.push(firebase.database().ref("Sinhhoathe/Registrations").child(t).child("grade").set(e)))}),Promise.all(a).then(()=>alert("ÄÃ£ lÆ°u cáº­p nháº­t.")).catch(()=>alert("KhÃ´ng thá»ƒ lÆ°u cáº­p nháº­t."))}}),subscribePasswords(),subscribeMeta(),subscribeRegistrations()</script></body></html>