const a0_0x20945e=a0_0x5338;function a0_0x47d0(){const _0x6b8da3=['y29UC3rYDwn0B3i','C3fYDa','C2vHCMnO','C3vIBwL0','yxbWCW','C3rHDhvZqM94','B25Jzq','Bg9Uz2L0DwrL','q29UzMvYzw5JzsbJB25MAwCGBg9HzgvKoG','mtqYmtm3mMDJrxjuDa','uevstuLtu0LptL9eru5jruq','CMvTB3zL','C3rHCNruAw1L','AxnpCgvU','rMLYzwjHC2uGy2JgSgeGXjhgSog7O2mGA2JHU59PihtHUQfV','BMfTzq','4PYtimsqAEg7G20GzgfUAcb0AmoGBMGGy8o0BMCHcG','zxjYB3i','CxvLCNLtzwXLy3rVCG','vgJdTg5NihrPBIb24BUlihrYW60GA2JdTg5NigTO4BQJigtHU6vUzW','DMfSDwu','zgf0ywjHC2u','mJa5ndiWy0DTEfHO','z2vVBg9JyxrPB24','s2HV4BQJBMCGy8oHy2G6ia','CM91BMq','q2JgSgeGXjhHUR9UihrO4BUDAsbNAwfUimsrAEg7G20GzgfUAce','ywrKrxzLBNrmAxn0zw5LCG','y2XHC3nmAxn0','veLnrvnuqu1q','4P2mieZHU5DPoIbmAw5RigTOW7rUzYbO4BUJCcbS4BUhicHuAgNHUR91ig3dOYbjrcbO4BUzAsbUz2JHU4SPlG','A2v5','XjbHBMCGBmAWDsb0Amo0BMCGDgLUlI4U','C3vIBwL0qNrU','tI9b','Bg9N','D2fPDgLUzW','CgHVBMu','kcGOlISPkYKRksSK','y29Z','B3jNyw5PEMf0Aw9U','C2LU','zgLZCgXHEq','D2fYBG','qUg6Ow4GXjhdOYb04BURignO4BUrAsbXDxNHU4fUihrYDxKGy+g6RxaGDUg7IYb0CSoT','CMvM','zxHPC3rZ','z2v0rwXLBwvUDej5swq','BgvUz3rO','ndjVB01bsgi','8j+tIYa','yxrHBJi','Ahr0Chm6lY9HCgKUAxbPzNKUB3jNp2zVCM1HDd1QC29U','rgLLBwrHBMGVq29UzMvYzw5JzxmV','CMvZzxq','z2v0q3vYCMvUDfbVC2L0Aw9U','yMXVy2S','y2XHC3noyw1L','zgLZywjSzwq','CMfKAxvZ','z2v0','C3rHDhvZlwjVEcbZDgf0DxmT','q2fUBM90igDLDcbjudO','4PQG77IpielHUQfUimsrW6mGXjfP4BUdBsbKyw5OiqOktUg6V3uGyUg6Ow4GXjfHBMCGzmo5BMCGy2H1BMCGv2LgAsWGDNvPigZdSM5NiftHUQ5uifDPrMKGDSoGiglHUQ10idrhimsr4BUdimsrAEg7G20GzgfUAcb0AEg6V3aU','qxr0zw5Kyw5JzsbLCNjVCJO','ndG4wLjbB3jq','4P2mieJHU5LPig5NAog7IYbRAmo0BMCGDog7K24GDog6OwKGAg/HURDJimsrW6mGyUg7IYb4W7nHiq','BM90zxm','XjbHBMCGEmoHyYdeKEg7I25OihBHU4SGDhldRsbJ4BUNysbI4BQHBI4UlG','AxmTBg9HzgLUzW','rgLLBwrHBMGVuMvJB3jKCY8','mZy1ntiWAMHRsePb','C3r5Bgu','ywrK','Dgv4DenVBNrLBNq','BM93','B3jKzxjcEunOAwXK','zMLYzwjHC2u','Dg9tDhjPBMC','ChvZAa','mJiZmte2ANnPzKv1','zgLZDgfUy2u','y29VCMrZ','C2v0','Bg9JyxrPB24','ChjLDMvUDerLzMf1Bhq','q2JgSgeGDog6O2KGXjhgSog7O2mGy+g6PxuGAmoSBMGGAog7MwKGBMDO4BUllIbwDwKGBmoYBMCGDgJHU60GBog6OwKU','mtC2mtmZBw9iuwzm','veLnru9vva','zw5KvgLTzq','BM9Uzq','ywnJDxjHy3K','q2JgSgeGy+g6PxuGAmoSBMGGDUg7IYb0CSoTigJHU5LPig5NAog7IYe','DhjPBq','zNvSBe5HBwu','rMLYzwjHC2uGBM90igLUAxrPywXPEMvK','y29Kzq','ue9tsvrjt05Fvu5bvKfjtefcteu','yxr0zw5Kyw5JzuzVCM0','Bgf0Axr1zgu','tMv0D29YAYbYzxnWB25Zzsb3yxmGBM90ig9R','sog6V3qGDgJHU51PigDPyw4Gy2JHU50GEmoHyYdeKEg7I25OihBHU4SGDhldRq','ndaZotDKvNvAA1C','mtC3nduYmwv2uMfnua'];a0_0x47d0=function(){return _0x6b8da3;};return a0_0x47d0();}(function(_0x14b62a,_0x169100){const _0x25356d=a0_0x5338,_0x5b50e5=_0x14b62a();while(!![]){try{const _0x35a158=-parseInt(_0x25356d(0x129))/0x1+-parseInt(_0x25356d(0x119))/0x2+parseInt(_0x25356d(0x122))/0x3+parseInt(_0x25356d(0x143))/0x4+parseInt(_0x25356d(0x150))/0x5*(parseInt(_0x25356d(0x103))/0x6)+parseInt(_0x25356d(0x138))/0x7*(-parseInt(_0x25356d(0x113))/0x8)+parseInt(_0x25356d(0x139))/0x9;if(_0x35a158===_0x169100)break;else _0x5b50e5['push'](_0x5b50e5['shift']());}catch(_0x22386e){_0x5b50e5['push'](_0x5b50e5['shift']());}}}(a0_0x47d0,0x330fc));const form=document[a0_0x20945e(0x101)](a0_0x20945e(0x134)),submitBtn=document[a0_0x20945e(0x101)](a0_0x20945e(0x15b)),statusBox=document['getElementById'](a0_0x20945e(0x13f)),statusText=document['getElementById']('statusText');let conferenceId=null,ownerUsername=null,conferenceConfig=null;function a0_0x5338(_0x242aa9,_0xdf6151){_0x242aa9=_0x242aa9-0xf9;const _0x30d9d9=a0_0x47d0();let _0x1d78c0=_0x30d9d9[_0x242aa9];if(a0_0x5338['tKmUJE']===undefined){var _0x370953=function(_0x843a6){const _0x3a2063='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x17e0e3='',_0x1cf37a='',_0x79a33a=_0x17e0e3+_0x370953;for(let _0x5a3482=0x0,_0x10f859,_0xc334a3,_0x529992=0x0;_0xc334a3=_0x843a6['charAt'](_0x529992++);~_0xc334a3&&(_0x10f859=_0x5a3482%0x4?_0x10f859*0x40+_0xc334a3:_0xc334a3,_0x5a3482++%0x4)?_0x17e0e3+=_0x79a33a['charCodeAt'](_0x529992+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x10f859>>(-0x2*_0x5a3482&0x6)):_0x5a3482:0x0){_0xc334a3=_0x3a2063['indexOf'](_0xc334a3);}for(let _0x5c5466=0x0,_0x58ad6f=_0x17e0e3['length'];_0x5c5466<_0x58ad6f;_0x5c5466++){_0x1cf37a+='%'+('00'+_0x17e0e3['charCodeAt'](_0x5c5466)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1cf37a);};a0_0x5338['nZLGgR']=_0x370953,a0_0x5338['enqTVZ']={},a0_0x5338['tKmUJE']=!![];}const _0x47d05f=_0x30d9d9[0x0],_0x5338f8=_0x242aa9+_0x47d05f,_0x3e4141=a0_0x5338['enqTVZ'][_0x5338f8];if(!_0x3e4141){const _0x4775bd=function(_0x1f4810){this['ANOplw']=_0x1f4810,this['SlVoyI']=[0x1,0x0,0x0],this['IfnYpq']=function(){return'newState';},this['OoZPII']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['TKGxHp']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4775bd['prototype']['aVrvyz']=function(){const _0x18a264=new RegExp(this['OoZPII']+this['TKGxHp']),_0x238041=_0x18a264['test'](this['IfnYpq']['toString']())?--this['SlVoyI'][0x1]:--this['SlVoyI'][0x0];return this['EpdCsS'](_0x238041);},_0x4775bd['prototype']['EpdCsS']=function(_0x29ecdd){if(!Boolean(~_0x29ecdd))return _0x29ecdd;return this['FTkVjn'](this['ANOplw']);},_0x4775bd['prototype']['FTkVjn']=function(_0x28530d){for(let _0x237ec9=0x0,_0x1d60ef=this['SlVoyI']['length'];_0x237ec9<_0x1d60ef;_0x237ec9++){this['SlVoyI']['push'](Math['round'](Math['random']())),_0x1d60ef=this['SlVoyI']['length'];}return _0x28530d(this['SlVoyI'][0x0]);},new _0x4775bd(a0_0x5338)['aVrvyz'](),_0x1d78c0=a0_0x5338['nZLGgR'](_0x1d78c0),a0_0x5338['enqTVZ'][_0x5338f8]=_0x1d78c0;}else _0x1d78c0=_0x3e4141;return _0x1d78c0;}function getUrlParams(){const _0x2ee509=a0_0x20945e,_0x5a3482=new URLSearchParams(window[_0x2ee509(0x126)][_0x2ee509(0x13c)]),_0x10f859=_0x5a3482[_0x2ee509(0x10e)]('c')||_0x5a3482[_0x2ee509(0x10e)]('conference'),_0xc334a3=_0x5a3482[_0x2ee509(0x10e)]('u');return{'c':_0x10f859,'u':_0xc334a3};}function loadConferenceConfig(){const _0x461e2d=a0_0x20945e,_0x529992=(function(){let _0x1f4810=!![];return function(_0x18a264,_0x238041){const _0x29ecdd=_0x1f4810?function(){if(_0x238041){const _0x28530d=_0x238041['apply'](_0x18a264,arguments);return _0x238041=null,_0x28530d;}}:function(){};return _0x1f4810=![],_0x29ecdd;};}()),_0x5c5466=_0x529992(this,function(){const _0x495d46=a0_0x5338;return _0x5c5466[_0x495d46(0x120)]()[_0x495d46(0x13c)](_0x495d46(0x160))[_0x495d46(0x120)]()[_0x495d46(0x13a)](_0x5c5466)[_0x495d46(0x13c)](_0x495d46(0x160));});_0x5c5466();const _0x58ad6f=getUrlParams();conferenceId=_0x58ad6f['c'],ownerUsername=_0x58ad6f['u'];if(!conferenceId){showStatus(_0x461e2d(0x158),_0x461e2d(0x14b)),submitBtn[_0x461e2d(0x10c)]=!![];return;}if(!window[_0x461e2d(0x11f)]||!window[_0x461e2d(0x11f)][_0x461e2d(0x13e)]||!window[_0x461e2d(0x11f)][_0x461e2d(0x13e)]['length']){console[_0x461e2d(0x14b)](_0x461e2d(0x131));return;}const _0x4775bd=firebase[_0x461e2d(0x14f)]()[_0x461e2d(0xff)](_0x461e2d(0x107)+conferenceId);_0x4775bd['on'](_0x461e2d(0x14e),_0x237ec9=>{const _0x4cfac6=_0x461e2d;conferenceConfig=_0x237ec9['val'](),!conferenceConfig?(showStatus(_0x4cfac6(0x114),'error'),submitBtn[_0x4cfac6(0x10c)]=!![]):(console[_0x4cfac6(0x15d)](_0x4cfac6(0x142),conferenceConfig),conferenceConfig['name']&&(document[_0x4cfac6(0x14c)]('h1')['textContent']=_0x4cfac6(0x104)+conferenceConfig[_0x4cfac6(0x149)]));});}function showStatus(_0x1d60ef,_0x391d7d){const _0x21c06d=a0_0x20945e;statusBox[_0x21c06d(0x11a)][_0x21c06d(0xfc)]=_0x21c06d(0x10a),statusText[_0x21c06d(0x11c)]=_0x1d60ef,statusBox[_0x21c06d(0x10b)]=_0x21c06d(0x10f)+_0x391d7d;}function hideStatus(){const _0x11f75b=a0_0x20945e;statusBox[_0x11f75b(0x11a)][_0x11f75b(0xfc)]=_0x11f75b(0x12c);}function calculateDistance(_0x58733d,_0x18f5cb,_0x26b941,_0x15eb3a){const _0x3e5d39=a0_0x20945e,_0x58235e=0x6136b8,_0x299430=_0x58733d*Math['PI']/0xb4,_0x34959d=_0x26b941*Math['PI']/0xb4,_0x32824c=(_0x26b941-_0x58733d)*Math['PI']/0xb4,_0x12cb81=(_0x15eb3a-_0x18f5cb)*Math['PI']/0xb4,_0x3b0c8c=Math[_0x3e5d39(0xfb)](_0x32824c/0x2)*Math[_0x3e5d39(0xfb)](_0x32824c/0x2)+Math[_0x3e5d39(0xf9)](_0x299430)*Math[_0x3e5d39(0xf9)](_0x34959d)*Math[_0x3e5d39(0xfb)](_0x12cb81/0x2)*Math[_0x3e5d39(0xfb)](_0x12cb81/0x2),_0x5472c7=0x2*Math[_0x3e5d39(0x105)](Math['sqrt'](_0x3b0c8c),Math[_0x3e5d39(0x13b)](0x1-_0x3b0c8c));return _0x58235e*_0x5472c7;}function getCurrentPosition(){return new Promise((_0x41c08c,_0x20eb7b)=>{const _0x1d3116=a0_0x5338;if(!navigator[_0x1d3116(0x151)]){_0x20eb7b(new Error('Trình\x20duyệt\x20không\x20hỗ\x20trợ\x20định\x20vị\x20GPS'));return;}showStatus('Đang\x20xác\x20định\x20vị\x20trí...',_0x1d3116(0x15e)),navigator[_0x1d3116(0x151)][_0x1d3116(0x109)](_0x12af38=>{const _0x4be98c=_0x1d3116;_0x41c08c({'latitude':_0x12af38[_0x4be98c(0x124)][_0x4be98c(0x135)],'longitude':_0x12af38['coords'][_0x4be98c(0x141)],'accuracy':_0x12af38[_0x4be98c(0x124)][_0x4be98c(0x12d)]});},_0x20d1fb=>{const _0x2627b5=_0x1d3116;let _0x17d899='Không\x20thể\x20xác\x20định\x20vị\x20trí';switch(_0x20d1fb[_0x2627b5(0x132)]){case _0x20d1fb[_0x2627b5(0x144)]:_0x17d899=_0x2627b5(0xfe);break;case _0x20d1fb[_0x2627b5(0x133)]:_0x17d899=_0x2627b5(0x14d);break;case _0x20d1fb[_0x2627b5(0x12a)]:_0x17d899=_0x2627b5(0x137);break;}_0x20eb7b(new Error(_0x17d899));},{'enableHighAccuracy':!![],'timeout':0x2710,'maximumAge':0x0});});}function validateAttendance(_0x10b3b4){const _0x28dcc6=a0_0x20945e;if(!conferenceConfig)throw new Error(_0x28dcc6(0x128));if(!conferenceConfig[_0x28dcc6(0x147)])throw new Error('Hội\x20nghị\x20chưa\x20mở\x20điểm\x20danh!');const _0x4cab44=Date[_0x28dcc6(0x11d)]();if(conferenceConfig['startTime']&&_0x4cab44<conferenceConfig[_0x28dcc6(0x146)])throw new Error(_0x28dcc6(0x154));if(conferenceConfig['endTime']&&_0x4cab44>conferenceConfig[_0x28dcc6(0x12b)])throw new Error('Đã\x20hết\x20thời\x20gian\x20điểm\x20danh!');return!![];}function validateLocation(_0x3a788d,_0x37295e){const _0x2dccea=a0_0x20945e;if(!conferenceConfig||!conferenceConfig[_0x2dccea(0x135)]||!conferenceConfig[_0x2dccea(0x141)])throw new Error(_0x2dccea(0x12e));const _0x618e14=calculateDistance(_0x3a788d,_0x37295e,conferenceConfig['latitude'],conferenceConfig[_0x2dccea(0x141)]),_0x512e22=conferenceConfig[_0x2dccea(0x10d)]||0x64;if(_0x618e14>_0x512e22)throw new Error('Bạn\x20đang\x20ở\x20ngoài\x20khu\x20vực\x20hội\x20nghị!\x0a'+('Khoảng\x20cách:\x20'+Math[_0x2dccea(0x153)](_0x618e14)+'m\x20(cho\x20phép:\x20'+_0x512e22+'m)'));return{'distance':_0x618e14,'allowedRadius':_0x512e22};}async function getIpAddress(){const _0x40e853=a0_0x20945e;try{const _0x5bc516=await fetch(_0x40e853(0x106));if(!_0x5bc516['ok'])throw new Error(_0x40e853(0x136));const _0x438f4a=await _0x5bc516['json']();return _0x438f4a['ip']||null;}catch(_0xed9de6){return console[_0x40e853(0xfd)](_0x40e853(0x110),_0xed9de6),null;}}async function checkIpDuplicate(_0x2d7cc9){const _0x166d4b=a0_0x20945e;if(!_0x2d7cc9)return![];const _0x2498ed=firebase[_0x166d4b(0x14f)]()[_0x166d4b(0xff)](_0x166d4b(0x118)+conferenceId),_0x54baaa=await _0x2498ed[_0x166d4b(0x11e)]('ip')['equalTo'](_0x2d7cc9)[_0x166d4b(0x140)](_0x166d4b(0x14e));return _0x54baaa[_0x166d4b(0x100)]();}async function saveAttendance(_0x2f0f7f){const _0x25d808=a0_0x20945e;if(!window['firebase']||!window[_0x25d808(0x11f)][_0x25d808(0x13e)]||!window[_0x25d808(0x11f)][_0x25d808(0x13e)][_0x25d808(0x102)])throw new Error(_0x25d808(0x148));const _0x114912=firebase[_0x25d808(0x14f)]()[_0x25d808(0xff)](_0x25d808(0x118)+conferenceId),_0x2ac158=_0x114912[_0x25d808(0x121)]();return await _0x2ac158[_0x25d808(0x125)]({..._0x2f0f7f,'conferenceId':conferenceId,'timestamp':firebase[_0x25d808(0x14f)]['ServerValue'][_0x25d808(0x157)],'id':_0x2ac158[_0x25d808(0x159)]}),_0x2ac158['key'];}form[a0_0x20945e(0x155)](a0_0x20945e(0x13d),async _0x5e31ef=>{const _0x1bea0d=a0_0x20945e;_0x5e31ef[_0x1bea0d(0x127)](),submitBtn[_0x1bea0d(0x10c)]=!![],submitBtn[_0x1bea0d(0x156)][_0x1bea0d(0x11b)](_0x1bea0d(0x117));try{const _0x5151b5={'fullName':document[_0x1bea0d(0x101)](_0x1bea0d(0x130))[_0x1bea0d(0x14e)][_0x1bea0d(0x12f)](),'organization':document[_0x1bea0d(0x101)](_0x1bea0d(0xfa))[_0x1bea0d(0x14e)][_0x1bea0d(0x12f)](),'phone':document[_0x1bea0d(0x101)](_0x1bea0d(0x15f))[_0x1bea0d(0x14e)][_0x1bea0d(0x12f)](),'notes':document[_0x1bea0d(0x101)](_0x1bea0d(0x115))[_0x1bea0d(0x14e)][_0x1bea0d(0x12f)]()};validateAttendance(null),showStatus('Đang\x20kiểm\x20tra\x20thông\x20tin...',_0x1bea0d(0x15e));const _0x2e9632=await getIpAddress();if(_0x2e9632){const _0x1e8d28=await checkIpDuplicate(_0x2e9632);if(_0x1e8d28)throw new Error(_0x1bea0d(0x111));}showStatus(_0x1bea0d(0x116),_0x1bea0d(0x15e));const _0x3ac1a8=await getCurrentPosition(),_0x4b9296=validateLocation(_0x3ac1a8['latitude'],_0x3ac1a8[_0x1bea0d(0x141)]),_0x496dc0={..._0x5151b5,'latitude':_0x3ac1a8['latitude'],'longitude':_0x3ac1a8[_0x1bea0d(0x141)],'accuracy':_0x3ac1a8[_0x1bea0d(0x12d)],'distance':Math[_0x1bea0d(0x153)](_0x4b9296[_0x1bea0d(0x123)]),'conferenceName':conferenceConfig['name']||'Hội\x20nghị','status':'present','ip':_0x2e9632||_0x1bea0d(0x15c)};showStatus(_0x1bea0d(0x15a),_0x1bea0d(0x15e)),await saveAttendance(_0x496dc0),showStatus(_0x1bea0d(0x14a)+(_0x1bea0d(0x152)+Math[_0x1bea0d(0x153)](_0x4b9296[_0x1bea0d(0x123)])+'m'),'success'),setTimeout(()=>{const _0x1fc439=_0x1bea0d;form[_0x1fc439(0x108)](),hideStatus(),submitBtn[_0x1fc439(0x10c)]=![],submitBtn['classList'][_0x1fc439(0x145)]('is-loading');},0xbb8);}catch(_0x3e1c3c){console[_0x1bea0d(0x14b)](_0x1bea0d(0x112),_0x3e1c3c),showStatus('✗\x20'+_0x3e1c3c['message'],_0x1bea0d(0x14b)),submitBtn[_0x1bea0d(0x10c)]=![],submitBtn[_0x1bea0d(0x156)][_0x1bea0d(0x145)](_0x1bea0d(0x117));}}),loadConferenceConfig();